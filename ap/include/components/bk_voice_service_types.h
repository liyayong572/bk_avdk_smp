// Copyright 2025-2026 Beken
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

#pragma once

#include <components/bk_audio/audio_algorithms/aec_v3_algorithm.h>
#include <components/bk_audio/audio_algorithms/eq_algorithm.h>
#include <components/bk_audio/audio_streams/raw_stream.h>
#include <components/bk_audio/audio_streams/onboard_mic_stream.h>
#include <components/bk_audio/audio_streams/onboard_dual_dmic_mic_stream.h>
#include <components/bk_audio/audio_streams/onboard_speaker_stream.h>
#include <components/bk_audio/audio_encoders/g711_encoder.h>
#include <components/bk_audio/audio_decoders/g711_decoder.h>
#include <components/bk_audio/audio_encoders/aac_encoder.h>
#include <components/bk_audio/audio_decoders/aac_decoder.h>
#include <components/bk_audio/audio_streams/uac_mic_stream.h>
#include <components/bk_audio/audio_streams/uac_speaker_stream.h>
#include <components/bk_audio/audio_encoders/g722_encoder.h>
#include <components/bk_audio/audio_decoders/g722_decoder.h>
#include <components/bk_audio/audio_encoders/opus_enc.h>
#include <components/bk_audio/audio_decoders/opus_dec.h>
#include <components/bk_audio/audio_pipeline/audio_types.h>
#include <components/bk_audio/audio_streams/i2s_stream.h>

#ifdef __cplusplus
extern "C" {
#endif

/**
 * @brief Generic Voice Service Types
 * 
 * This file defines the common data types, enumerations, and structures used by the
 * voice service module. These types are used to configure and control voice service
 * operations including microphone input, speaker output, encoding, decoding, and audio
 * processing algorithms.
 */

/**
 * @brief Voice service status enumeration
 *
 * This enumeration defines the operational states of the voice service.
 */
typedef enum
{
    VOICE_STA_NONE = 0,    /*!< Voice service is in an undefined state */
    VOICE_STA_IDLE,        /*!< Voice service is initialized but not active */
    VOICE_STA_RUNNING,     /*!< Voice service is actively processing audio */
    VOICE_STA_STOPPING,    /*!< Voice service is in the process of stopping */
    VOICE_STA_STOPED,      /*!< Voice service has been stopped */
} voice_sta_t;

/**
 * @brief Voice service event enumeration
 *
 * This enumeration defines the events that can be generated by the voice service.
 */
typedef enum
{
    VOC_EVT_NONE = 0,              /*!< No event */
    VOC_EVT_MIC_NOT_SUPPORT,       /*!< Microphone type is not supported */
    VOC_EVT_SPK_NOT_SUPPORT,       /*!< Speaker type is not supported */
    VOC_EVT_ERROR_UNKNOW,          /*!< Unknown error occurred */
    VOC_EVT_STOP,                  /*!< Voice service stop event */
} voice_evt_t;

/**
 * @brief Voice service event handler callback type
 *
 * This typedef defines the function pointer type for handling voice service events.
 *
 * @param evt Event type
 * @param data Event data
 * @param args User defined arguments
 * @return bk_err_t Returns BK_OK on success, other values indicate error
 */
typedef bk_err_t (*voice_event_handle)(voice_evt_t evt, void *data, void *args);

/**
 * @brief Voice service element init callback type
 *
 * This typedef defines the function pointer type for initializing voice service elements.
 *
 * @param args User defined arguments
 * @return audio_element_handle_t Returns a handle to the initialized audio element, or NULL on failure
 */
typedef audio_element_handle_t (*voice_element_init)(void *args);

/**
 * @brief Voice service handle type
 *
 * This typedef defines a pointer to the voice service structure.
 */
typedef struct voice *voice_handle_t;

/**
 * @brief Common audio codec configuration structure
 *
 * This structure defines common configuration parameters for audio encoders and decoders.
 */
typedef struct
{
    uint32_t    samp_rate;        /*!< Audio sampling rate in Hz */
    uint32_t    bitrate;          /*!< Audio bitrate in bits per second */
    uint32_t    frame_in_size;    /*!< Input frame size in bytes */
    uint32_t    frame_out_size;   /*!< Output frame size in bytes */
    uint8_t     bits;             /*!< Number of bits per sample */
    uint8_t     frame_in_ms;      /*!< Input frame duration in milliseconds */
    uint8_t     vbr;              /*!< Variable bitrate enable flag */
    uint8_t     channels;         /*!< Number of audio channels */
} audio_codec_common_t;

/**
 * @brief Voice service configuration structure
 *
 * This structure defines the complete configuration for the voice service,
 * including microphone settings, speaker settings, encoding/decoding parameters,
 * and audio processing algorithms.
 */
typedef struct
{
    mic_type_t              mic_type;      /*!< Microphone type */
    union
    {
        onboard_mic_stream_cfg_t            onboard_mic_cfg;          /*!< Onboard microphone configuration */
        onboard_dual_dmic_mic_stream_cfg_t  onboard_dual_dmic_mic_cfg; /*!< Onboard dual DMIC configuration */
        uac_mic_stream_cfg_t                uac_mic_cfg;              /*!< USB audio class microphone configuration */
    } mic_cfg;                              /*!< Microphone configuration union */

    bool                    aec_en;        /*!< Acoustic Echo Cancellation (AEC) enable flag */
    union
    {
        aec_v3_algorithm_cfg_t aec_alg_cfg; /*!< AEC algorithm configuration */
        uint8_t                reserve;     /*!< Reserved for future use */
    } aec_cfg;                              /*!< AEC configuration union */
    
    bool                    enc_en;        /*!< Audio encoder enable flag */
    audio_enc_type_t        enc_type;      /*!< Audio encoder type */
    audio_codec_common_t    enc_common;    /*!< Common encoder configuration */
    union
    {
        g711_encoder_cfg_t    g711_enc_cfg; /*!< G.711 encoder configuration */
#if CONFIG_VOICE_SERVICE_AAC_ENCODER
        aac_encoder_cfg_t     aac_enc_cfg;  /*!< AAC encoder configuration */
#endif
#if CONFIG_VOICE_SERVICE_G722_ENCODER
        g722_encoder_cfg_t    g722_enc_cfg; /*!< G.722 encoder configuration */
#endif
#if CONFIG_VOICE_SERVICE_OPUS_ENCODER
        opus_enc_cfg_t        opus_enc_cfg; /*!< Opus encoder configuration */
#endif
        uint8_t               pcm_enc_cfg;  /*!< PCM encoder configuration placeholder */
    } enc_cfg;                              /*!< Encoder configuration union */

    uint32_t                read_pool_size;     /*!< Size (in bytes) of pool to save encoded microphone data */
    uint32_t                write_pool_size;    /*!< Size (in bytes) of pool to save speaker data that hasn't been decoded */

    bool                    dec_en;        /*!< Audio decoder enable flag */
    audio_dec_type_t        dec_type;      /*!< Audio decoder type */
    audio_codec_common_t    dec_common;    /*!< Common decoder configuration */
    union
    {
        g711_decoder_cfg_t    g711_dec_cfg; /*!< G.711 decoder configuration */
#if CONFIG_VOICE_SERVICE_AAC_DECODER
        aac_decoder_cfg_t     aac_dec_cfg;  /*!< AAC decoder configuration */
#endif
#if CONFIG_VOICE_SERVICE_G722_DECODER
        g722_decoder_cfg_t    g722_dec_cfg; /*!< G.722 decoder configuration */
#endif
#if CONFIG_VOICE_SERVICE_OPUS_DECODER
        opus_dec_cfg_t        opus_dec_cfg; /*!< Opus decoder configuration */
#endif
        uint8_t               pcm_dec_cfg;  /*!< PCM decoder configuration placeholder */
    } dec_cfg;                              /*!< Decoder configuration union */
    
    spk_type_t              spk_type;      /*!< Speaker type */
    union
    {
        onboard_speaker_stream_cfg_t    onboard_spk_cfg; /*!< Onboard speaker configuration */
        uac_speaker_stream_cfg_t        uac_spk_cfg;     /*!< USB audio class speaker configuration */
        i2s_stream_cfg_t                i2s_cfg;         /*!< I2S speaker configuration */
    } spk_cfg;                              /*!< Speaker configuration union */

#if CONFIG_VOICE_SERVICE_EQ
    bool                    eq_en;         /*!< Equalizer enable flag */
    union
    {
        eq_algorithm_cfg_t  eq_alg_cfg;    /*!< Equalizer algorithm configuration */
    } eq_cfg;                               /*!< Equalizer configuration union */
#endif

    voice_event_handle      event_handle;  /*!< Voice event handle callback function */
    void *                  args;          /*!< User defined arguments for the event handle function */

    voice_element_init      voice_enc_init; /*!< Voice encoder element init callback function, use this function to create an encoder element when enc_type=AUDIO_ENC_TYPE_USER */
    void *                  enc_args;       /*!< User defined config arguments for the voice encoder init function */
    voice_element_init      voice_dec_init; /*!< Voice decoder element init callback function, use this function to create a decoder element when dec_type=AUDIO_DEC_TYPE_USER */
    void *                  dec_args;       /*!< User defined config arguments for the voice decoder init function */
} voice_cfg_t;

/**
 * @brief Default voice service configuration using onboard microphone and speaker with AEC, 8000Hz sample rate and G.711a codec
 * 
 * This configuration defines default settings for voice service operations using:
 * - Input: Onboard microphone
 * - Output: Onboard speaker
 * - AEC: Enabled
 * - Mic sample rate: 8000Hz
 * - Speaker sample rate: 8000Hz
 * - Encoder: G.711a
 * - Decoder: G.711a
 * - Equalizer: Disabled
 */
#define VOICE_BY_ONBOARD_MIC_SPK_CFG_DEFAULT() DEFAULT_VOICE_BY_ONBOARD_MIC_SPK_CONFIG()

#define DEFAULT_VOICE_BY_ONBOARD_MIC_SPK_CONFIG() {             \
    .mic_type = MIC_TYPE_ONBOARD,                               \
    .mic_cfg.onboard_mic_cfg = {                                \
        .adc_cfg = {                                            \
           .chl_num = 1,                                        \
           .bits = 16,                                          \
           .sample_rate = 8000,                                 \
           .dig_gain = 0x28,                                    \
           .ana_gain = 0x8,                                     \
           .mode = AUD_ADC_MODE_DIFFEN,                         \
           .clk_src = AUD_CLK_XTAL,                             \
        },                                                      \
        .frame_size = 320,                                      \
        .out_block_size = 320,                                  \
        .out_block_num = 2,                                     \
        .multi_out_port_num = 0,                                \
        .task_stack = ONBOARD_MIC_STREAM_TASK_STACK,            \
        .task_core = ONBOARD_MIC_STREAM_TASK_CORE,              \
        .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
    },                                                          \
    .aec_en = true,                                             \
    .aec_cfg.aec_alg_cfg = {                                    \
        .task_stack = AEC_V3_ALGORITHM_TASK_STACK,              \
        .task_core = AEC_V3_ALGORITHM_TASK_CORE,                \
        .task_prio = AEC_V3_ALGORITHM_TASK_PRIO,                \
        .aec_cfg = {                                            \
            .mode = AEC_MODE_SOFTWARE,                          \
            .fs = 8000,                                         \
            .init_flags = AEC_V3_ALGORITHM_INIT_FLAG,           \
            .delay_points = AEC_V3_DELAY_POINTS,                \
            .ec_depth = AEC_V3_ALGORITHM_EC_DEPTH,              \
            .ref_scale = AEC_V3_ALGORITHM_REF_SCALE,            \
            .voice_vol = AEC_V3_ALGORITHM_VOL,                  \
            .ns_type = NS_TRADITION,                            \
            .ns_filter = AEC_V3_ALGORITHM_NS_FILTER,            \
            .ns_level = AEC_V3_ALGORITHM_NS_LEVEL,              \
            .ns_para = AEC_V3_ALGORITHM_NS_PARA,                \
            .drc = AEC_V3_ALGORITHM_DRC,                        \
            .ec_filter = AEC_V3_ALGORITHM_EC_FILTER,            \
            .interweave = AEC_V3_ALGORITHM_INTERWEAVE,          \
            .dist = AEC_V3_ALGORITHM_MIC_DIST,                  \
            .mic_swap = AEC_V3_ALGORITHM_MIC_SWAP,              \
            .ec_only_output = AEC_V3_ALGORITHM_EC_ONLY_OUTPUT,  \
            .dual_perp = DUAL_CH_0_DEGREE,                      \
        },                                                      \
        .vad_cfg = {                                            \
            .vad_enable = 0,                                    \
            .vad_start_threshold = 480,                         \
            .vad_stop_threshold = 960,                          \
            .vad_silence_threshold = 320,                       \
            .vad_eng_threshold =2000,                           \
            .vad_bad_frame = AEC_V3_VAD_BAD_FRAME_NUM,          \
            .vad_buf_size = 15360,                              \
            .vad_frame_size = 320,                              \
        },                                                      \
        .out_block_size = 320,                                  \
        .out_block_num = AEC_V3_ALGORITHM_OUT_BLOCK_NUM,        \
        .multi_out_port_num = 0,                                \
        .dual_ch = 0,                                           \
    },                                                          \
    .enc_en = true,                                             \
    .enc_type = AUDIO_ENC_TYPE_G711A,                           \
    .enc_cfg.g711_enc_cfg = {                                   \
        .buf_sz = G711_ENCODER_BUFFER_SIZE,                     \
        .out_block_size = 160,                                  \
        .out_block_num = 1,                                     \
        .task_stack = G711_ENCODER_TASK_STACK,                  \
        .task_core = G711_ENCODER_TASK_CORE,                    \
        .task_prio = G711_ENCODER_TASK_PRIO,                    \
        .enc_mode = G711_ENC_MODE_A_LOW,                        \
    },                                                          \
    .read_pool_size = 160,                                      \
    .write_pool_size = 320,                                     \
    .dec_en = true,                                             \
    .dec_type = AUDIO_DEC_TYPE_G711A,                           \
    .dec_cfg.g711_dec_cfg = {                                   \
        .buf_sz = G711_DECODER_BUFFER_SIZE,                     \
        .out_block_size = 320,                                  \
        .out_block_num = 1,                                     \
        .task_stack = G711_DECODER_TASK_STACK,                  \
        .task_core = G711_DECODER_TASK_CORE,                    \
        .task_prio = G711_DECODER_TASK_PRIO,                    \
        .dec_mode = G711_DEC_MODE_A_LOW,                        \
    },                                                          \
    .spk_type = SPK_TYPE_ONBOARD,                               \
    .spk_cfg.onboard_spk_cfg = {                                \
        .chl_num = 1,                                           \
        .sample_rate = 8000,                                    \
        .dig_gain = 0x2d,                                       \
        .ana_gain = 0x07,                                       \
        .work_mode = AUD_DAC_WORK_MODE_DIFFEN,                  \
        .bits = 16,                                             \
        .clk_src = AUD_CLK_XTAL,                                \
        .multi_in_port_num = 0,                                 \
        .multi_out_port_num = 1,                                \
        .frame_size = 320,                                      \
        .pool_length = 0,                                       \
        .pool_play_thold = 0,                                   \
        .pool_pause_thold = 0,                                  \
        .pa_ctrl_en = false,                                    \
        .pa_ctrl_gpio = 0,                                      \
        .pa_on_level = 0,                                       \
        .pa_on_delay = 0,                                       \
        .pa_off_delay = 0,                                      \
        .task_stack = ONBOARD_SPEAKER_STREAM_TASK_STACK,        \
        .task_core = ONBOARD_SPEAKER_STREAM_TASK_CORE,          \
        .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
    },                                                          \
    .event_handle = NULL,                                       \
    .args = NULL,                                               \
    .voice_enc_init = NULL,                                     \
    .enc_args = NULL,                                           \
    .voice_dec_init = NULL,                                     \
    .dec_args = NULL,                                           \
}

/**
 * @brief Default voice service configuration using onboard microphone and speaker with AEC, 16000Hz sample rate and G.711a codec
 * 
 * This configuration defines default settings for voice service operations using:
 * - Input: Onboard microphone
 * - Output: Onboard speaker
 * - AEC: Enabled
 * - Mic sample rate: 16000Hz
 * - Speaker sample rate: 16000Hz
 * - Encoder: G.711a
 * - Decoder: G.711a
 * - Equalizer: Disabled
 */
#define DEFAULT_VOICE_BY_ONBOARD_MIC_SPK_AEC_G711A_16000_CONFIG() {             \
    .mic_type = MIC_TYPE_ONBOARD,                                               \
    .mic_cfg.onboard_mic_cfg = {                                                \
        .adc_cfg = {                                                            \
           .chl_num = 1,                                                        \
           .bits = 16,                                                          \
           .sample_rate = 16000,                                                \
           .dig_gain = 0x28,                                                    \
           .ana_gain = 0x8,                                                     \
           .mode = AUD_ADC_MODE_DIFFEN,                                         \
           .clk_src = AUD_CLK_XTAL,                                             \
        },                                                                      \
        .frame_size = 640,                                                      \
        .out_block_size = 640,                                                  \
        .out_block_num = 2,                                                     \
        .multi_out_port_num = 0,                                                \
        .task_stack = ONBOARD_MIC_STREAM_TASK_STACK,                            \
        .task_core = ONBOARD_MIC_STREAM_TASK_CORE,                              \
        .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,                          \
    },                                                                          \
    .aec_en = true,                                                             \
    .aec_cfg.aec_alg_cfg = {                                                    \
        .task_stack = AEC_V3_ALGORITHM_TASK_STACK,                              \
        .task_core = AEC_V3_ALGORITHM_TASK_CORE,                                \
        .task_prio = AEC_V3_ALGORITHM_TASK_PRIO,                                \
        .aec_cfg = {                                                            \
            .mode = AEC_MODE_SOFTWARE,                                          \
            .fs = AEC_V3_ALGORITHM_FS,                                          \
            .init_flags = AEC_V3_ALGORITHM_INIT_FLAG,                           \
            .delay_points = AEC_V3_DELAY_POINTS,                                \
            .ec_depth = AEC_V3_ALGORITHM_EC_DEPTH,                              \
            .ref_scale = AEC_V3_ALGORITHM_REF_SCALE,                            \
            .voice_vol = AEC_V3_ALGORITHM_VOL,                                  \
            .ns_type = NS_TRADITION,                                            \
            .ns_filter = AEC_V3_ALGORITHM_NS_FILTER,                            \
            .ns_level = AEC_V3_ALGORITHM_NS_LEVEL,                              \
            .ns_para = AEC_V3_ALGORITHM_NS_PARA,                                \
            .drc = AEC_V3_ALGORITHM_DRC,                                        \
            .ec_filter = AEC_V3_ALGORITHM_EC_FILTER,                            \
            .interweave = AEC_V3_ALGORITHM_INTERWEAVE,                          \
            .dist = AEC_V3_ALGORITHM_MIC_DIST,                                  \
            .mic_swap = AEC_V3_ALGORITHM_MIC_SWAP,                              \
            .ec_only_output = AEC_V3_ALGORITHM_EC_ONLY_OUTPUT,                  \
            .dual_perp = DUAL_CH_0_DEGREE,                                      \
        },                                                                      \
        .vad_cfg = {                                                            \
            .vad_enable = 0,                                                    \
            .vad_start_threshold = 480,                                         \
            .vad_stop_threshold = 960,                                          \
            .vad_silence_threshold = 320,                                       \
            .vad_eng_threshold =2000,                                           \
            .vad_bad_frame = AEC_V3_VAD_BAD_FRAME_NUM,                          \
            .vad_buf_size = 15360,                                              \
            .vad_frame_size = 640,                                              \
        },                                                                      \
        .out_block_size = 640,                                                  \
        .out_block_num = AEC_V3_ALGORITHM_OUT_BLOCK_NUM,                        \
        .multi_out_port_num = 0,                                                \
        .dual_ch = 0,                                                           \
    },                                                                          \
    .enc_en = true,                                                             \
    .enc_type = AUDIO_ENC_TYPE_G711A,                                           \
    .enc_cfg.g711_enc_cfg = {                                                   \
        .buf_sz = G711_ENCODER_BUFFER_SIZE,                                     \
        .out_block_size = 320,                                                  \
        .out_block_num = 1,                                                     \
        .task_stack = G711_ENCODER_TASK_STACK,                                  \
        .task_core = G711_ENCODER_TASK_CORE,                                    \
        .task_prio = G711_ENCODER_TASK_PRIO,                                    \
        .enc_mode = G711_ENC_MODE_A_LOW,                                        \
    },                                                                          \
    .read_pool_size = 320,                                                      \
    .write_pool_size = 640,                                                     \
    .dec_en = true,                                                             \
    .dec_type = AUDIO_DEC_TYPE_G711A,                                           \
    .dec_cfg.g711_dec_cfg = {                                                   \
        .buf_sz = G711_DECODER_BUFFER_SIZE,                                     \
        .out_block_size = 640,                                                  \
        .out_block_num = 1,                                                     \
        .task_stack = G711_DECODER_TASK_STACK,                                  \
        .task_core = G711_DECODER_TASK_CORE,                                    \
        .task_prio = G711_DECODER_TASK_PRIO,                                    \
        .dec_mode = G711_DEC_MODE_A_LOW,                                        \
    },                                                                          \
    .spk_type = SPK_TYPE_ONBOARD,                                               \
    .spk_cfg.onboard_spk_cfg = {                                                \
        .chl_num = 1,                                                           \
        .sample_rate = 16000,                                                   \
        .dig_gain = 0x2d,                                                       \
        .ana_gain = 0x07,                                                       \
        .work_mode = AUD_DAC_WORK_MODE_DIFFEN,                                  \
        .bits = 16,                                                             \
        .clk_src = AUD_CLK_XTAL,                                                \
        .multi_in_port_num = 0,                                                 \
        .multi_out_port_num = 1,                                                \
        .frame_size = 640,                                                      \
        .pool_length = 0,                                                       \
        .pool_play_thold = 0,                                                   \
        .pool_pause_thold = 0,                                                  \
        .pa_ctrl_en = false,                                                    \
        .pa_ctrl_gpio = 0,                                                      \
        .pa_on_level = 0,                                                       \
        .pa_on_delay = 0,                                                       \
        .pa_off_delay = 0,                                                      \
        .task_stack = ONBOARD_SPEAKER_STREAM_TASK_STACK,                        \
        .task_core = ONBOARD_SPEAKER_STREAM_TASK_CORE,                          \
        .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,                          \
    },                                                                          \
    .event_handle = NULL,                                                       \
    .args = NULL,                                                               \
}

/**
 * @brief Default voice service configuration using UAC microphone and speaker with AEC, 8000Hz sample rate and G.711a codec
 * 
 * This configuration defines default settings for voice service operations using:
 * - Input: UAC microphone
 * - Output: UAC speaker
 * - AEC: Enabled
 * - Mic sample rate: 8000Hz
 * - Speaker sample rate: 8000Hz
 * - Encoder: G.711a
 * - Decoder: G.711a
 * - Equalizer: Disabled
 */
#define VOICE_BY_UAC_MIC_SPK_CFG_DEFAULT() DEFAULT_VOICE_BY_UAC_MIC_SPK_CONFIG() 

#define DEFAULT_VOICE_BY_UAC_MIC_SPK_CONFIG() {                \
    .mic_type = MIC_TYPE_UAC,                                  \
    .mic_cfg.uac_mic_cfg = {                                   \
        .port_index = USB_HUB_PORT_1,                          \
        .format = AUDIO_FORMAT_PCM,                            \
        .chl_num = 1,                                          \
        .bits = 16,                                            \
        .samp_rate = 8000,                                     \
        .frame_size = 320,                                     \
        .out_block_size = 320,                                 \
        .out_block_num = 1,                                    \
        .auto_connect = true,                                  \
        .multi_out_port_num = 0,                               \
        .task_stack = UAC_MIC_STREAM_TASK_STACK,               \
        .task_core = UAC_MIC_STREAM_TASK_CORE,                 \
        .task_prio = UAC_MIC_STREAM_TASK_PRIO,                 \
    },                                                         \
    .aec_en = true,                                            \
    .aec_cfg.aec_alg_cfg = {                                   \
        .task_stack = AEC_V3_ALGORITHM_TASK_STACK,             \
        .task_core = AEC_V3_ALGORITHM_TASK_CORE,               \
        .task_prio = AEC_V3_ALGORITHM_TASK_PRIO,               \
        .aec_cfg = {                                           \
            .mode = AEC_MODE_SOFTWARE,                         \
            .fs = 8000,                                        \
            .init_flags = AEC_V3_ALGORITHM_INIT_FLAG,          \
            .delay_points = AEC_V3_DELAY_POINTS,               \
            .ec_depth = AEC_V3_ALGORITHM_EC_DEPTH,             \
            .ref_scale = AEC_V3_ALGORITHM_REF_SCALE,           \
            .voice_vol = AEC_V3_ALGORITHM_VOL,                 \
            .ns_type = NS_TRADITION,                           \
            .ns_filter = AEC_V3_ALGORITHM_NS_FILTER,           \
            .ns_level = AEC_V3_ALGORITHM_NS_LEVEL,             \
            .ns_para = AEC_V3_ALGORITHM_NS_PARA,               \
            .drc = AEC_V3_ALGORITHM_DRC,                       \
            .ec_filter = AEC_V3_ALGORITHM_EC_FILTER,           \
            .interweave = AEC_V3_ALGORITHM_INTERWEAVE,         \
            .dist = AEC_V3_ALGORITHM_MIC_DIST,                 \
            .mic_swap = AEC_V3_ALGORITHM_MIC_SWAP,             \
            .ec_only_output = AEC_V3_ALGORITHM_EC_ONLY_OUTPUT, \
            .dual_perp = DUAL_CH_0_DEGREE,                     \
        },                                                     \
        .vad_cfg = {                                           \
            .vad_enable = 0,                                   \
            .vad_start_threshold = 480,                        \
            .vad_stop_threshold = 960,                         \
            .vad_silence_threshold = 320,                      \
            .vad_eng_threshold =2000,                          \
            .vad_bad_frame = AEC_V3_VAD_BAD_FRAME_NUM,         \
            .vad_buf_size = 15360,                             \
            .vad_frame_size = 320,                             \
        },                                                     \
        .out_block_size = 320,                                 \
        .out_block_num = AEC_V3_ALGORITHM_OUT_BLOCK_NUM,       \
        .multi_out_port_num = 0,                               \
        .dual_ch = 0,                                          \
    },                                                         \
    .enc_en = true,                                            \
    .enc_type = AUDIO_ENC_TYPE_G711A,                          \
    .enc_cfg.g711_enc_cfg = {                                  \
        .buf_sz = G711_ENCODER_BUFFER_SIZE,                    \
        .out_block_size = 160,                                 \
        .out_block_num = 1,                                    \
        .task_stack = G711_ENCODER_TASK_STACK,                 \
        .task_core = G711_ENCODER_TASK_CORE,                   \
        .task_prio = G711_ENCODER_TASK_PRIO,                   \
        .enc_mode = G711_ENC_MODE_A_LOW,                       \
    },                                                         \
    .read_pool_size = 160,                                     \
    .write_pool_size = 320,                                    \
    .dec_en = true,                                            \
    .dec_type = AUDIO_DEC_TYPE_G711A,                          \
    .dec_cfg.g711_dec_cfg = {                                  \
        .buf_sz = G711_DECODER_BUFFER_SIZE,                    \
        .out_block_size = 320,                                 \
        .out_block_num = 1,                                    \
        .task_stack = G711_DECODER_TASK_STACK,                 \
        .task_core = G711_DECODER_TASK_CORE,                   \
        .task_prio = G711_DECODER_TASK_PRIO,                   \
        .dec_mode = G711_DEC_MODE_A_LOW,                       \
    },                                                         \
    .spk_type = SPK_TYPE_UAC,                                  \
    .spk_cfg.uac_spk_cfg = {                                   \
        .port_index = USB_HUB_PORT_1,                          \
        .format = AUDIO_FORMAT_PCM,                            \
        .chl_num = 1,                                          \
        .bits = 16,                                            \
        .samp_rate = 8000,                                     \
        .frame_size = 320,                                     \
        .volume = 5,                                           \
        .auto_connect = true,                                  \
        .multi_out_port_num = 1,                               \
        .pool_size = 0,                                        \
        .pool_play_thold = 0,                                  \
        .pool_pause_thold = 0,                                 \
        .task_stack = UAC_SPEAKER_STREAM_TASK_STACK,           \
        .task_core = UAC_SPEAKER_STREAM_TASK_CORE,             \
        .task_prio = UAC_SPEAKER_STREAM_TASK_PRIO,             \
    },                                                         \
    .event_handle = NULL,                                      \
    .args = NULL,                                              \
    .voice_enc_init = NULL,                                    \
    .enc_args = NULL,                                          \
    .voice_dec_init = NULL,                                    \
    .dec_args = NULL,                                          \
}

#if CONFIG_VOICE_SERVICE_AAC_ENCODER && CONFIG_VOICE_SERVICE_AAC_DECODER
/**
 * @brief Default voice service configuration using onboard microphone and speaker with AEC, 8000Hz sample rate and AAC codec
 * 
 * This configuration defines default settings for voice service operations using:
 * - Input: Onboard microphone
 * - Output: Onboard speaker
 * - AEC: Enabled
 * - Mic sample rate: 8000Hz
 * - Speaker sample rate: 8000Hz
 * - Encoder: AAC
 * - Decoder: AAC
 * - Equalizer: Disabled
 */
#define VOICE_BY_ONBOARD_MIC_SPK_AAC_CFG_DEFAULT() DEFAULT_VOICE_BY_ONBOARD_MIC_SPK_AAC_CONFIG() 

#define DEFAULT_VOICE_BY_ONBOARD_MIC_SPK_AAC_CONFIG() {             \
        .mic_type = MIC_TYPE_ONBOARD,                               \
        .mic_cfg.onboard_mic_cfg = {                                \
            .adc_cfg = {                                            \
                .chl_num = 1,                                       \
                .bits = 16,                                         \
                .sample_rate = 8000,                                \
                .dig_gain = 0x28,                                   \
                .ana_gain = 0x8,                                    \
                .mode = AUD_ADC_MODE_DIFFEN,                        \
                .clk_src = AUD_CLK_XTAL,                            \
            },                                                      \
            .frame_size = 320,                                      \
            .out_block_size = 320,                                  \
            .out_block_num = 2,                                     \
            .multi_out_port_num = 0,                                \
            .task_stack = ONBOARD_MIC_STREAM_TASK_STACK,            \
            .task_core = ONBOARD_MIC_STREAM_TASK_CORE,              \
            .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
        },                                                          \
        .aec_en = true,                                             \
        .aec_cfg.aec_alg_cfg = {                                    \
            .task_stack = AEC_V3_ALGORITHM_TASK_STACK,              \
            .task_core = AEC_V3_ALGORITHM_TASK_CORE,                \
            .task_prio = AEC_V3_ALGORITHM_TASK_PRIO,                \
            .aec_cfg = {                                            \
                .mode = AEC_MODE_SOFTWARE,                          \
                .fs = 8000,                                         \
                .init_flags = AEC_V3_ALGORITHM_INIT_FLAG,           \
                .delay_points = AEC_V3_DELAY_POINTS,                \
                .ec_depth = AEC_V3_ALGORITHM_EC_DEPTH,              \
                .ref_scale = AEC_V3_ALGORITHM_REF_SCALE,            \
                .voice_vol = AEC_V3_ALGORITHM_VOL,                  \
                .ns_type = NS_TRADITION,                            \
                .ns_filter = AEC_V3_ALGORITHM_NS_FILTER,            \
                .ns_level = AEC_V3_ALGORITHM_NS_LEVEL,              \
                .ns_para = AEC_V3_ALGORITHM_NS_PARA,                \
                .drc = AEC_V3_ALGORITHM_DRC,                        \
                .ec_filter = AEC_V3_ALGORITHM_EC_FILTER,            \
                .interweave = AEC_V3_ALGORITHM_INTERWEAVE,          \
                .dist = AEC_V3_ALGORITHM_MIC_DIST,                  \
                .mic_swap = AEC_V3_ALGORITHM_MIC_SWAP,              \
                .ec_only_output = AEC_V3_ALGORITHM_EC_ONLY_OUTPUT,  \
                .dual_perp = DUAL_CH_0_DEGREE,                      \
            },                                                      \
            .vad_cfg = {                                            \
                .vad_enable = 0,                                    \
                .vad_start_threshold = 480,                         \
                .vad_stop_threshold = 960,                          \
                .vad_silence_threshold = 320,                       \
                .vad_eng_threshold =2000,                           \
                .vad_bad_frame = AEC_V3_VAD_BAD_FRAME_NUM,          \
                .vad_buf_size = 15360,                              \
                .vad_frame_size = 320,                              \
            },                                                      \
            .out_block_size = 320,                                  \
            .out_block_num = AEC_V3_ALGORITHM_OUT_BLOCK_NUM,        \
            .multi_out_port_num = 0,                                \
            .dual_ch = 0,                                           \
        },                                                          \
        .enc_en = true,                                             \
        .enc_type = AUDIO_ENC_TYPE_AAC,                             \
        .enc_cfg.aac_enc_cfg = {                                    \
            .chl_num            = AAC_ENCODER_CHL_NUM,              \
            .samp_rate          = AAC_ENCODER_SAMP_RATE,            \
            .bits               = AAC_ENCODER_BITS,                 \
            .modules            = AAC_ENCODER_MODULES,              \
            .aot                = AAC_ENCODER_AOT,                  \
            .bitrate            = AAC_ENCODER_BITRATE,              \
            .bitrate_mode       = AAC_ENCODER_BITRATE_MODE,         \
            .sbr_mode           = AAC_ENCODER_SBR_MODE,             \
            .granule_length     = AAC_ENCODER_GRANULE_LENGTH,       \
            .chl_order          = AAC_ENCODER_CHL_ORDER,            \
            .afterburner_en     = AAC_ENCODER_AFTERBURNER_EN,       \
            .transport_type     = AAC_ENCODER_TRANSPORT_TYPE,       \
            .buffer_len         = AAC_ENCODER_BUFFER_LEN,           \
            .in_pool_len        = AAC_ENCODER_IN_POOL_LEN,          \
            .out_buffer_len     = AAC_ENCODER_OUT_BUFFER_LEN,       \
            .out_block_size     = AAC_ENCODER_OUT_BLOCK_SIZE,       \
            .out_block_num      = AAC_ENCODER_OUT_BLOCK_NUM,        \
            .task_stack         = AAC_ENCODER_TASK_STACK,           \
            .task_core          = AAC_ENCODER_TASK_CORE,            \
            .task_prio          = AAC_ENCODER_TASK_PRIO,            \
        },                                                          \
        .read_pool_size = AAC_ENCODER_OUT_BLOCK_SIZE,               \
        .write_pool_size = (AAC_DECODER_MAIN_BUFF_SIZE * 2),        \
        .dec_en = true,                                             \
        .dec_type = AUDIO_DEC_TYPE_AAC,                             \
        .dec_cfg.aac_dec_cfg = {                                    \
        .main_buff_size         = AAC_DECODER_MAIN_BUFF_SIZE,       \
        .out_pcm_buff_size      = AAC_DECODER_OUT_PCM_BUFF_SIZE,    \
        .out_block_size         = AAC_DECODER_OUT_PCM_BUFF_SIZE,    \
        .out_block_num          = AAC_DECODER_OUT_BLOCK_NUM,        \
        .task_stack             = AAC_DECODER_TASK_STACK,           \
        .task_core              = AAC_DECODER_TASK_CORE,            \
        .task_prio              = AAC_DECODER_TASK_PRIO,            \
        },                                                          \
        .spk_type = SPK_TYPE_ONBOARD,                               \
        .spk_cfg.onboard_spk_cfg = {                                \
            .chl_num = 1,                                           \
            .sample_rate = 8000,                                    \
            .dig_gain = 0x2d,                                       \
            .ana_gain = 0x07,                                       \
            .work_mode = AUD_DAC_WORK_MODE_DIFFEN,                  \
            .bits = 16,                                             \
            .clk_src = AUD_CLK_XTAL,                                \
            .multi_in_port_num = 0,                                 \
            .multi_out_port_num = 1,                                \
            .frame_size = 320,                                      \
            .pool_length = 0,                                       \
            .pool_play_thold = 0,                                   \
            .pool_pause_thold = 0,                                  \
            .pa_ctrl_en = false,                                    \
            .pa_ctrl_gpio = 0,                                      \
            .pa_on_level = 0,                                       \
            .pa_on_delay = 0,                                       \
            .pa_off_delay = 0,                                      \
            .task_stack = ONBOARD_SPEAKER_STREAM_TASK_STACK,        \
            .task_core = ONBOARD_SPEAKER_STREAM_TASK_CORE,          \
            .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
        },                                                          \
        .event_handle = NULL,                                       \
        .args = NULL,                                               \
        .voice_enc_init = NULL,                                     \
        .enc_args = NULL,                                           \
        .voice_dec_init = NULL,                                     \
        .dec_args = NULL,                                           \
    }
#endif  //CONFIG_VOICE_SERVICE_AAC_ENCODER && CONFIG_VOICE_SERVICE_AAC_DECODER

/**
 * @brief Default voice service configuration using onboard dual DMIC and speaker with AEC, 16000Hz sample rate and G.711a codec
 * 
 * This configuration defines default settings for voice service operations using:
 * - Input: Onboard dual DMIC
 * - Output: Onboard speaker
 * - AEC: Enabled
 * - Mic sample rate: 16000Hz
 * - Speaker sample rate: 16000Hz
 * - Encoder: G.711a
 * - Decoder: G.711a
 */
#define VOICE_BY_ONBOARD_DUAL_DMIC_MIC_SPK_CFG_DEFAULT() DEFAULT_VOICE_BY_ONBOARD_DUAL_DMIC_MIC_SPK_CONFIG() 

#define DEFAULT_VOICE_BY_ONBOARD_DUAL_DMIC_MIC_SPK_CONFIG() {   \
    .mic_type = MIC_TYPE_ONBOARD_DUAL_DMIC_MIC,                 \
    .mic_cfg.onboard_dual_dmic_mic_cfg = {                      \
        .adc_cfg = {                                            \
           .chl_num = 1,                                        \
           .bits = 16,                                          \
           .sample_rate = 16000,                                \
           .dig_gain = 0x28,                                    \
           .ana_gain = 0x8,                                     \
           .mode = AUD_ADC_MODE_DIFFEN,                         \
           .clk_src = AUD_CLK_APLL,                             \
        },                                                      \
        .frame_size = 640,                                      \
        .out_block_size = 640,                                  \
        .out_block_num = 2,                                     \
        .multi_out_port_num = 0,                                \
        .task_stack = ONBOARD_DUAL_DMIC_MIC_STREAM_TASK_STACK,  \
        .task_core = ONBOARD_DUAL_DMIC_MIC_STREAM_TASK_CORE,    \
        .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
        .ref_mode = 0,                                          \
        .dual_dmic = 1,                                         \
        .dual_dmic_sgl_out = 0,                                 \
        .dmic_data_shift = 0,                                   \
    },                                                          \
    .aec_en = true,                                             \
    .aec_cfg.aec_alg_cfg = {                                    \
        .task_stack = AEC_V3_ALGORITHM_TASK_STACK,              \
        .task_core = AEC_V3_ALGORITHM_TASK_CORE,                \
        .task_prio = AEC_V3_ALGORITHM_TASK_PRIO,                \
        .aec_cfg = {                                            \
            .mode = AEC_MODE_SOFTWARE,                          \
            .fs = AEC_V3_ALGORITHM_FS,                          \
            .init_flags = AEC_V3_ALGORITHM_INIT_FLAG,           \
            .delay_points = AEC_V3_DELAY_POINTS,                \
            .ec_depth = AEC_V3_ALGORITHM_EC_DEPTH,              \
            .ref_scale = AEC_V3_ALGORITHM_REF_SCALE,            \
            .voice_vol = AEC_V3_ALGORITHM_VOL,                  \
            .ns_type = NS_AI,                                   \
            .ns_filter = AEC_V3_ALGORITHM_NS_FILTER,            \
            .ns_level = AEC_V3_ALGORITHM_NS_LEVEL,              \
            .ns_para = AEC_V3_ALGORITHM_NS_PARA,                \
            .drc = AEC_V3_ALGORITHM_DRC,                        \
            .ec_filter = AEC_V3_ALGORITHM_EC_FILTER,            \
            .interweave = AEC_V3_ALGORITHM_INTERWEAVE,          \
            .dist = AEC_V3_ALGORITHM_MIC_DIST,                  \
            .mic_swap = AEC_V3_ALGORITHM_MIC_SWAP,              \
            .ec_only_output = AEC_V3_ALGORITHM_EC_ONLY_OUTPUT,  \
            .dual_perp = DUAL_CH_0_DEGREE,                      \
        },                                                      \
        .vad_cfg = {                                            \
            .vad_enable = 1,                                    \
            .vad_start_threshold = 480,                         \
            .vad_stop_threshold = 960,                          \
            .vad_silence_threshold = 320,                       \
            .vad_eng_threshold =2000,                           \
            .vad_bad_frame = AEC_V3_VAD_BAD_FRAME_NUM,          \
            .vad_buf_size = 15360,                              \
            .vad_frame_size = 640,                              \
        },                                                      \
        .out_block_size = 640,                                  \
        .out_block_num = AEC_V3_ALGORITHM_OUT_BLOCK_NUM,        \
        .multi_out_port_num = 0,                                \
        .dual_ch = 1,                                           \
    },                                                          \
    .enc_en = true,                                             \
    .enc_type = AUDIO_ENC_TYPE_G711A,                           \
    .enc_cfg.g711_enc_cfg = {                                   \
        .buf_sz = G711_ENCODER_BUFFER_SIZE,                     \
        .out_block_size = 320,                                  \
        .out_block_num = 1,                                     \
        .task_stack = G711_ENCODER_TASK_STACK,                  \
        .task_core = G711_ENCODER_TASK_CORE,                    \
        .task_prio = G711_ENCODER_TASK_PRIO,                    \
        .enc_mode = G711_ENC_MODE_A_LOW,                        \
    },                                                          \
    .read_pool_size = 320,                                      \
    .write_pool_size = 640,                                     \
    .dec_en = true,                                             \
    .dec_type = AUDIO_DEC_TYPE_G711A,                           \
    .dec_cfg.g711_dec_cfg = {                                   \
        .buf_sz = G711_DECODER_BUFFER_SIZE,                     \
        .out_block_size = 640,                                  \
        .out_block_num = 1,                                     \
        .task_stack = G711_DECODER_TASK_STACK,                  \
        .task_core = G711_DECODER_TASK_CORE,                    \
        .task_prio = G711_DECODER_TASK_PRIO,                    \
        .dec_mode = G711_DEC_MODE_A_LOW,                        \
    },                                                          \
    .spk_type = SPK_TYPE_ONBOARD,                               \
    .spk_cfg.onboard_spk_cfg = {                                \
        .chl_num = 1,                                           \
        .sample_rate = 16000,                                   \
        .dig_gain = 0x2d,                                       \
        .ana_gain = 0x07,                                       \
        .work_mode = AUD_DAC_WORK_MODE_DIFFEN,                  \
        .bits = 16,                                             \
        .clk_src = AUD_CLK_APLL,                                \
        .multi_out_port_num = 1,                                \
        .frame_size = 640,                                      \
        .pool_length = 0,                                       \
        .pool_play_thold = 0,                                   \
        .pool_pause_thold = 0,                                  \
        .pa_ctrl_en = false,                                    \
        .pa_ctrl_gpio = 0,                                      \
        .pa_on_level = 0,                                       \
        .pa_on_delay = 0,                                       \
        .pa_off_delay = 0,                                      \
        .task_stack = ONBOARD_SPEAKER_STREAM_TASK_STACK,        \
        .task_core = ONBOARD_SPEAKER_STREAM_TASK_CORE,          \
        .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
    },                                                          \
    .event_handle = NULL,                                       \
    .args = NULL,                                               \
    .voice_enc_init = NULL,                                     \
    .enc_args = NULL,                                           \
    .voice_dec_init = NULL,                                     \
    .dec_args = NULL,                                           \
}

#if CONFIG_VOICE_SERVICE_G722_ENCODER && CONFIG_VOICE_SERVICE_G722_DECODER
/**
 * @brief Default voice service configuration using onboard microphone and speaker with AEC, 16000Hz sample rate and G.722 codec
 * 
 * This configuration defines default settings for voice service operations using:
 * - Input: Onboard microphone
 * - Output: Onboard speaker
 * - AEC: Enabled
 * - Mic sample rate: 16000Hz
 * - Speaker sample rate: 16000Hz
 * - Encoder: G.722
 * - Decoder: G.722
 */
#define DEFAULT_VOICE_BY_ONBOARD_MIC_SPK_G722_CONFIG() {            \
        .mic_type = MIC_TYPE_ONBOARD,                               \
        .mic_cfg.onboard_mic_cfg = {                                \
            .adc_cfg = {                                            \
                .chl_num = 1,                                       \
                .bits = 16,                                         \
                .sample_rate = 16000,                               \
                .dig_gain = 0x28,                                   \
                .ana_gain = 0x8,                                    \
                .mode = AUD_ADC_MODE_DIFFEN,                        \
                .clk_src = AUD_CLK_XTAL,                            \
            },                                                      \
            .frame_size = 640,                                      \
            .out_block_size = 640,                                  \
            .out_block_num = 2,                                     \
            .multi_out_port_num = 0,                                \
            .task_stack = ONBOARD_MIC_STREAM_TASK_STACK,            \
            .task_core = ONBOARD_MIC_STREAM_TASK_CORE,              \
            .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
        },                                                          \
        .aec_en = true,                                             \
        .aec_cfg.aec_alg_cfg = {                                    \
            .task_stack = AEC_V3_ALGORITHM_TASK_STACK,              \
            .task_core = AEC_V3_ALGORITHM_TASK_CORE,                \
            .task_prio = AEC_V3_ALGORITHM_TASK_PRIO,                \
            .aec_cfg = {                                            \
                .mode = AEC_MODE_SOFTWARE,                          \
                .fs = AEC_V3_ALGORITHM_FS,                          \
                .init_flags = AEC_V3_ALGORITHM_INIT_FLAG,           \
                .delay_points = AEC_V3_DELAY_POINTS,                \
                .ec_depth = AEC_V3_ALGORITHM_EC_DEPTH,              \
                .ref_scale = AEC_V3_ALGORITHM_REF_SCALE,            \
                .voice_vol = AEC_V3_ALGORITHM_VOL,                  \
                .ns_type = NS_TRADITION,                            \
                .ns_filter = AEC_V3_ALGORITHM_NS_FILTER,            \
                .ns_level = AEC_V3_ALGORITHM_NS_LEVEL,              \
                .ns_para = AEC_V3_ALGORITHM_NS_PARA,                \
                .drc = AEC_V3_ALGORITHM_DRC,                        \
                .ec_filter = AEC_V3_ALGORITHM_EC_FILTER,            \
                .interweave = AEC_V3_ALGORITHM_INTERWEAVE,          \
                .dist = AEC_V3_ALGORITHM_MIC_DIST,                  \
                .mic_swap = AEC_V3_ALGORITHM_MIC_SWAP,              \
                .ec_only_output = AEC_V3_ALGORITHM_EC_ONLY_OUTPUT,  \
                .dual_perp = DUAL_CH_0_DEGREE,                      \
            },                                                      \
            .vad_cfg = {                                            \
                .vad_enable = 0,                                    \
                .vad_start_threshold = 480,                         \
                .vad_stop_threshold = 960,                          \
                .vad_silence_threshold = 320,                       \
                .vad_eng_threshold =2000,                           \
                .vad_bad_frame = AEC_V3_VAD_BAD_FRAME_NUM,          \
                .vad_buf_size = 15360,                              \
                .vad_frame_size = 640,                              \
            },                                                      \
            .out_block_size = 640,                                  \
            .out_block_num = AEC_V3_ALGORITHM_OUT_BLOCK_NUM,        \
            .multi_out_port_num = 0,                                \
            .dual_ch = 0,                                           \
        },                                                          \
        .enc_en = true,                                             \
        .enc_type = AUDIO_ENC_TYPE_G722,                            \
        .enc_cfg.g722_enc_cfg = {                                   \
            .buf_sz             = G722_ENCODER_BUFFER_SIZE,         \
            .out_block_size     = G722_ENCODER_OUT_BLOCK_SIZE,      \
            .out_block_num      = G722_ENCODER_OUT_BLOCK_NUM,       \
            .task_stack         = G722_ENCODER_TASK_STACK,          \
            .task_core          = G722_ENCODER_TASK_CORE,           \
            .task_prio          = G722_ENCODER_TASK_PRIO,           \
            .enc_rate           = G722_ENC_RATE_64000,              \
            .options            = 0,                                \
        },                                                          \
        .read_pool_size = 160,                                      \
        .write_pool_size = 320,                                     \
        .dec_en = true,                                             \
        .dec_type = AUDIO_DEC_TYPE_G722,                            \
        .dec_cfg.g722_dec_cfg = {                                   \
            .buf_sz             = G722_DECODER_BUFFER_SIZE,         \
            .out_block_size     = G722_DECODER_OUT_BLOCK_SIZE,      \
            .out_block_num      = G722_DECODER_OUT_BLOCK_NUM,       \
            .task_stack         = G722_DECODER_TASK_STACK,          \
            .task_core          = G722_DECODER_TASK_CORE,           \
            .task_prio          = G722_DECODER_TASK_PRIO,           \
            .rate               = G722_DEC_RATE_64000,              \
            .options            = G722_DEC_OPTION_NONE,             \
        },                                                          \
        .spk_type = SPK_TYPE_ONBOARD,                               \
        .spk_cfg.onboard_spk_cfg = {                                \
            .chl_num = 1,                                           \
            .sample_rate = 16000,                                   \
            .dig_gain = 0x2d,                                       \
            .ana_gain = 0x07,                                       \
            .work_mode = AUD_DAC_WORK_MODE_DIFFEN,                  \
            .bits = 16,                                             \
            .clk_src = AUD_CLK_XTAL,                                \
            .multi_in_port_num = 0,                                 \
            .multi_out_port_num = 1,                                \
            .frame_size = 640,                                      \
            .pool_length = 0,                                       \
            .pool_play_thold = 0,                                   \
            .pool_pause_thold = 0,                                  \
            .pa_ctrl_en = false,                                    \
            .pa_ctrl_gpio = 0,                                      \
            .pa_on_level = 0,                                       \
            .pa_on_delay = 0,                                       \
            .pa_off_delay = 0,                                      \
            .task_stack = ONBOARD_SPEAKER_STREAM_TASK_STACK,        \
            .task_core = ONBOARD_SPEAKER_STREAM_TASK_CORE,          \
            .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
        },                                                          \
        .event_handle = NULL,                                       \
        .args = NULL,                                               \
        .voice_enc_init = NULL,                                     \
        .enc_args = NULL,                                           \
        .voice_dec_init = NULL,                                     \
        .dec_args = NULL,                                           \
    }
#endif  //CONFIG_VOICE_SERVICE_G722_ENCODER && CONFIG_VOICE_SERVICE_G722_DECODER

/**
 * @brief Default voice service configuration using onboard microphone and speaker with AEC, 8000Hz sample rate and G.711a codec, with equalizer enabled
 * 
 * This configuration defines default settings for voice service operations using:
 * - Input: Onboard microphone
 * - Output: Onboard speaker
 * - AEC: Enabled
 * - Mic sample rate: 8000Hz
 * - Speaker sample rate: 8000Hz
 * - Encoder: G.711a
 * - Decoder: G.711a
 * - Equalizer: Enabled
 */
#if CONFIG_VOICE_SERVICE_EQ
#define VOICE_BY_ONBOARD_MIC_SPK_EQ_CFG_DEFAULT() DEFAULT_VOICE_BY_ONBOARD_MIC_SPK_EQ_CONFIG() 

#define DEFAULT_VOICE_BY_ONBOARD_MIC_SPK_EQ_CONFIG() {          \
    .mic_type = MIC_TYPE_ONBOARD,                               \
    .mic_cfg.onboard_mic_cfg = {                                \
        .adc_cfg = {                                            \
           .chl_num = 1,                                        \
           .bits = 16,                                          \
           .sample_rate = 8000,                                 \
           .dig_gain = 0x28,                                    \
           .ana_gain = 0x8,                                     \
           .mode = AUD_ADC_MODE_DIFFEN,                         \
           .clk_src = AUD_CLK_XTAL,                             \
        },                                                      \
        .frame_size = 320,                                      \
        .out_block_size = 320,                                  \
        .out_block_num = 2,                                     \
        .multi_out_port_num = 0,                                \
        .task_stack = ONBOARD_MIC_STREAM_TASK_STACK,            \
        .task_core = ONBOARD_MIC_STREAM_TASK_CORE,              \
        .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
    },                                                          \
    .aec_en = true,                                             \
    .aec_cfg.aec_alg_cfg = {                                    \
        .task_stack = AEC_V3_ALGORITHM_TASK_STACK,              \
        .task_core = AEC_V3_ALGORITHM_TASK_CORE,                \
        .task_prio = AEC_V3_ALGORITHM_TASK_PRIO,                \
        .aec_cfg = {                                            \
            .mode = AEC_MODE_SOFTWARE,                          \
            .fs = 8000,                                         \
            .init_flags = AEC_V3_ALGORITHM_INIT_FLAG,           \
            .delay_points = AEC_V3_DELAY_POINTS,                \
            .ec_depth = AEC_V3_ALGORITHM_EC_DEPTH,              \
            .ref_scale = AEC_V3_ALGORITHM_REF_SCALE,            \
            .voice_vol = AEC_V3_ALGORITHM_VOL,                  \
            .ns_type = NS_TRADITION,                            \
            .ns_filter = AEC_V3_ALGORITHM_NS_FILTER,            \
            .ns_level = AEC_V3_ALGORITHM_NS_LEVEL,              \
            .ns_para = AEC_V3_ALGORITHM_NS_PARA,                \
            .drc = AEC_V3_ALGORITHM_DRC,                        \
            .ec_filter = AEC_V3_ALGORITHM_EC_FILTER,            \
            .interweave = AEC_V3_ALGORITHM_INTERWEAVE,          \
            .dist = AEC_V3_ALGORITHM_MIC_DIST,                  \
            .mic_swap = AEC_V3_ALGORITHM_MIC_SWAP,              \
            .ec_only_output = AEC_V3_ALGORITHM_EC_ONLY_OUTPUT,  \
            .dual_perp = DUAL_CH_0_DEGREE,                      \
        },                                                      \
        .vad_cfg = {                                            \
            .vad_enable = 0,                                    \
            .vad_start_threshold = 480,                         \
            .vad_stop_threshold = 960,                          \
            .vad_silence_threshold = 320,                       \
            .vad_eng_threshold =2000,                           \
            .vad_bad_frame = AEC_V3_VAD_BAD_FRAME_NUM,          \
            .vad_buf_size = 15360,                              \
            .vad_frame_size = 320,                              \
        },                                                      \
        .out_block_size = 320,                                  \
        .out_block_num = AEC_V3_ALGORITHM_OUT_BLOCK_NUM,        \
        .multi_out_port_num = 0,                                \
        .dual_ch = 0,                                           \
    },                                                          \
    .enc_en = true,                                             \
    .enc_type = AUDIO_ENC_TYPE_G711A,                           \
    .enc_cfg.g711_enc_cfg = {                                   \
        .buf_sz = G711_ENCODER_BUFFER_SIZE,                     \
        .out_block_size = 160,                                  \
        .out_block_num = 1,                                     \
        .task_stack = G711_ENCODER_TASK_STACK,                  \
        .task_core = G711_ENCODER_TASK_CORE,                    \
        .task_prio = G711_ENCODER_TASK_PRIO,                    \
        .enc_mode = G711_ENC_MODE_A_LOW,                        \
    },                                                          \
    .read_pool_size = 160,                                      \
    .write_pool_size = 320,                                     \
    .dec_en = true,                                             \
    .dec_type = AUDIO_DEC_TYPE_G711A,                           \
    .dec_cfg.g711_dec_cfg = {                                   \
        .buf_sz = G711_DECODER_BUFFER_SIZE,                     \
        .out_block_size = 320,                                  \
        .out_block_num = 1,                                     \
        .task_stack = G711_DECODER_TASK_STACK,                  \
        .task_core = G711_DECODER_TASK_CORE,                    \
        .task_prio = G711_DECODER_TASK_PRIO,                    \
        .dec_mode = G711_DEC_MODE_A_LOW,                        \
    },                                                          \
    .spk_type = SPK_TYPE_ONBOARD,                               \
    .spk_cfg.onboard_spk_cfg = {                                \
        .chl_num = 1,                                           \
        .sample_rate = 8000,                                    \
        .dig_gain = 0x2d,                                       \
        .ana_gain = 0x07,                                       \
        .work_mode = AUD_DAC_WORK_MODE_DIFFEN,                  \
        .bits = 16,                                             \
        .clk_src = AUD_CLK_XTAL,                                \
        .multi_in_port_num = 0,                                 \
        .multi_out_port_num = 1,                                \
        .frame_size = 320,                                      \
        .pool_length = 0,                                       \
        .pool_play_thold = 0,                                   \
        .pool_pause_thold = 0,                                  \
        .pa_ctrl_en = false,                                    \
        .pa_ctrl_gpio = 0,                                      \
        .pa_on_level = 0,                                       \
        .pa_on_delay = 0,                                       \
        .pa_off_delay = 0,                                      \
        .task_stack = ONBOARD_SPEAKER_STREAM_TASK_STACK,        \
        .task_core = ONBOARD_SPEAKER_STREAM_TASK_CORE,          \
        .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
    },                                                          \
    .eq_en = true,                                              \
    .eq_cfg.eq_alg_cfg = {                                      \
    .task_stack            = EQ_ALGORITHM_TASK_STACK,           \
    .task_core             = EQ_ALGORITHM_TASK_CORE,            \
    .task_prio             = EQ_ALGORITHM_TASK_PRIO,            \
    .eq_cal_para = {                                            \
        .eq_en = 1,                                             \
        .filters = 2,                                           \
        .globle_gain = EQGLOBALGAIN,                            \
        .eq_para[0].a[0] = -EQ0A0,                              \
        .eq_para[0].a[1] = -EQ0A1,                              \
        .eq_para[0].b[0] = EQ0B0,                               \
        .eq_para[0].b[1] = EQ0B1,                               \
        .eq_para[0].b[2] = EQ0B2,                               \
        .eq_para[1].a[0] = -EQ1A0,                              \
        .eq_para[1].a[1] = -EQ1A1,                              \
        .eq_para[1].b[0] = EQ1B0,                               \
        .eq_para[1].b[1] = EQ1B1,                               \
        .eq_para[1].b[2] = EQ1B2,                               \
        .eq_load.f_gain     = EQFGAIN,                          \
        .eq_load.samplerate = EQSAMP,                           \
        .eq_load.eq_load_para[0].freq   = EQ0FREQ,              \
        .eq_load.eq_load_para[0].gain   = EQ0GAIN,              \
        .eq_load.eq_load_para[0].q_val  = EQ0QVAL,              \
        .eq_load.eq_load_para[0].type   = EQ0FTYPE,             \
        .eq_load.eq_load_para[0].enable  = EQ0,                 \
        .eq_load.eq_load_para[1].freq   = EQ1FREQ,              \
        .eq_load.eq_load_para[1].gain   = EQ1GAIN,              \
        .eq_load.eq_load_para[1].q_val  = EQ1QVAL,              \
        .eq_load.eq_load_para[1].type   = EQ1FTYPE,             \
        .eq_load.eq_load_para[1].enable  = EQ1,                 \
    },                                                          \
    .eq_chl_num            = 1,                                 \
    .eq_frame_size         = EQFRAMESIZE,                       \
    .out_block_num         = 2,                                 \
    .multi_out_port_num    = 0,                                 \
    },                                                          \
    .event_handle = NULL,                                       \
    .args = NULL,                                               \
    .voice_enc_init = NULL,                                     \
    .enc_args = NULL,                                           \
    .voice_dec_init = NULL,                                     \
    .dec_args = NULL,                                           \
}
#endif //CONFIG_VOICE_SERVICE_EQ

#if CONFIG_VOICE_SERVICE_OPUS_ENCODER && CONFIG_VOICE_SERVICE_OPUS_DECODER
/**
 * @brief Default voice service configuration using onboard microphone and speaker with AEC, 16000Hz sample rate and OPUS codec
 * 
 * This configuration defines default settings for voice service operations using:
 * - Input: Onboard microphone
 * - Output: Onboard speaker
 * - AEC: Enabled
 * - Mic sample rate: 16000Hz
 * - Speaker sample rate: 16000Hz
 * - Encoder: OPUS
 * - Decoder: OPUS
 */
#define DEFAULT_VOICE_BY_ONBOARD_MIC_SPK_OPUS_CONFIG() {            \
        .mic_type = MIC_TYPE_ONBOARD,                               \
        .mic_cfg.onboard_mic_cfg = {                                \
            .adc_cfg = {                                            \
                .chl_num = 1,                                       \
                .bits = 16,                                         \
                .sample_rate = 16000,                               \
                .dig_gain = 0x28,                                   \
                .ana_gain = 0x8,                                    \
                .mode = AUD_ADC_MODE_DIFFEN,                        \
                .clk_src = AUD_CLK_XTAL,                            \
            },                                                      \
            .frame_size = 640,                                      \
            .out_block_size = 640,                                  \
            .out_block_num = 2,                                     \
            .multi_out_port_num = 0,                                \
            .task_stack = ONBOARD_MIC_STREAM_TASK_STACK,            \
            .task_core = ONBOARD_MIC_STREAM_TASK_CORE,              \
            .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
        },                                                          \
        .aec_en = true,                                             \
        .aec_cfg.aec_alg_cfg = {                                    \
            .task_stack = AEC_V3_ALGORITHM_TASK_STACK,              \
            .task_core = AEC_V3_ALGORITHM_TASK_CORE,                \
            .task_prio = AEC_V3_ALGORITHM_TASK_PRIO,                \
            .aec_cfg = {                                            \
                .mode = AEC_MODE_SOFTWARE,                          \
                .fs = AEC_V3_ALGORITHM_FS,                          \
                .init_flags = AEC_V3_ALGORITHM_INIT_FLAG,           \
                .delay_points = AEC_V3_DELAY_POINTS,                \
                .ec_depth = AEC_V3_ALGORITHM_EC_DEPTH,              \
                .ref_scale = AEC_V3_ALGORITHM_REF_SCALE,            \
                .voice_vol = AEC_V3_ALGORITHM_VOL,                  \
                .ns_type = NS_AI,                                   \
                .ns_filter = AEC_V3_ALGORITHM_NS_FILTER,            \
                .ns_level = AEC_V3_ALGORITHM_NS_LEVEL,              \
                .ns_para = AEC_V3_ALGORITHM_NS_PARA,                \
                .drc = AEC_V3_ALGORITHM_DRC,                        \
                .ec_filter = AEC_V3_ALGORITHM_EC_FILTER,            \
                .interweave = AEC_V3_ALGORITHM_INTERWEAVE,          \
                .dist = AEC_V3_ALGORITHM_MIC_DIST,                  \
                .mic_swap = AEC_V3_ALGORITHM_MIC_SWAP,              \
                .ec_only_output = AEC_V3_ALGORITHM_EC_ONLY_OUTPUT,  \
                .dual_perp = DUAL_CH_0_DEGREE,                      \
            },                                                      \
            .vad_cfg = {                                            \
                .vad_enable = 0,                                    \
                .vad_start_threshold = 480,                         \
                .vad_stop_threshold = 960,                          \
                .vad_silence_threshold = 320,                       \
                .vad_eng_threshold =2000,                           \
                .vad_bad_frame = AEC_V3_VAD_BAD_FRAME_NUM,          \
                .vad_buf_size = 15360,                              \
                .vad_frame_size = 640,                              \
            },                                                      \
            .out_block_size = 640,                                  \
            .out_block_num = AEC_V3_ALGORITHM_OUT_BLOCK_NUM,        \
            .multi_out_port_num = 0,                                \
            .dual_ch = 0,                                           \
        },                                                          \
        .enc_en = true,                                             \
        .enc_type = AUDIO_ENC_TYPE_OPUS,                            \
        .enc_cfg.opus_enc_cfg = {                                   \
                .buf_sz             = OPUS_ENC_BUFFER_SIZE,         \
                .out_block_size     = OPUS_ENC_OUT_BLOCK_SIZE,      \
                .out_block_num      = OPUS_ENC_OUT_BLOCK_NUM,       \
                .task_stack         = OPUS_ENC_TASK_STACK,          \
                .task_core          = OPUS_ENC_TASK_CORE,           \
                .task_prio          = OPUS_ENC_TASK_PRIO,           \
                .enc_mode           = OPUS_ENC_MODE_AUDIO,          \
                .sample_rate        = OPUS_ENC_SAMPLE_RATE,         \
                .channels           = 1,                            \
                .bitrate            = OPUS_ENC_BITRATE,             \
                .frame_samples_per_channel = 320,                   \
        },                                                          \
        .read_pool_size = 160,                                      \
        .write_pool_size = 320,                                     \
        .dec_en = true,                                             \
        .dec_type = AUDIO_DEC_TYPE_OPUS,                            \
        .dec_cfg.opus_dec_cfg = {                                   \
            .buf_sz             = OPUS_DEC_BUFFER_SIZE,             \
            .out_block_size     = OPUS_DEC_OUT_BLOCK_SIZE,          \
            .out_block_num      = OPUS_DEC_OUT_BLOCK_NUM,           \
            .task_stack         = OPUS_DEC_TASK_STACK,              \
            .task_core          = OPUS_DEC_TASK_CORE,               \
            .task_prio          = OPUS_DEC_TASK_PRIO,               \
            .sample_rate        = OPUS_DEC_SAMPLE_RATE,             \
            .channels           = 1,                                \
        },                                                          \
        .spk_type = SPK_TYPE_ONBOARD,                               \
        .spk_cfg.onboard_spk_cfg = {                                \
            .chl_num = 1,                                           \
            .sample_rate = 16000,                                   \
            .dig_gain = 0x2d,                                       \
            .ana_gain = 0x07,                                       \
            .work_mode = AUD_DAC_WORK_MODE_DIFFEN,                  \
            .bits = 16,                                             \
            .clk_src = AUD_CLK_XTAL,                                \
            .multi_in_port_num = 0,                                 \
            .multi_out_port_num = 1,                                \
            .frame_size = 640,                                      \
            .pool_length = 0,                                       \
            .pool_play_thold = 0,                                   \
            .pool_pause_thold = 0,                                  \
            .pa_ctrl_en = false,                                    \
            .pa_ctrl_gpio = 0,                                      \
            .pa_on_level = 0,                                       \
            .pa_on_delay = 0,                                       \
            .pa_off_delay = 0,                                      \
            .task_stack = ONBOARD_SPEAKER_STREAM_TASK_STACK,        \
            .task_core = ONBOARD_SPEAKER_STREAM_TASK_CORE,          \
            .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,          \
        },                                                          \
        .event_handle = NULL,                                       \
        .args = NULL,                                               \
        .voice_enc_init = NULL,                                     \
        .enc_args = NULL,                                           \
        .voice_dec_init = NULL,                                     \
        .dec_args = NULL,                                           \
    }
#endif  //CONFIG_VOICE_SERVICE_OPUS_ENCODER && CONFIG_VOICE_SERVICE_OPUS_DECODER

/**
 * @brief Default voice service configuration using onboard microphone and i2s speaker with AEC, 16000Hz sample rate and G.711a codec
 * 
 * This configuration defines default settings for voice service operations using:
 * - Input: Onboard microphone
 * - Output: I2S speaker
 * - AEC: Enabled
 * - Mic sample rate: 16000Hz
 * - Speaker sample rate: 16000Hz
 * - Encoder: G.711a
 * - Decoder: G.711a
 * - Equalizer: Disabled
 */
#define DEFAULT_VOICE_BY_ONBOARD_MIC_I2S_SPK_AEC_G711A_16000_CONFIG() {         \
    .mic_type = MIC_TYPE_ONBOARD,                                               \
    .mic_cfg.onboard_mic_cfg = {                                                \
        .adc_cfg = {                                                            \
           .chl_num = 1,                                                        \
           .bits = 16,                                                          \
           .sample_rate = 16000,                                                \
           .dig_gain = 0x28,                                                    \
           .ana_gain = 0x8,                                                     \
           .mode = AUD_ADC_MODE_DIFFEN,                                         \
           .clk_src = AUD_CLK_XTAL,                                             \
        },                                                                      \
        .frame_size = 640,                                                      \
        .out_block_size = 640,                                                  \
        .out_block_num = 2,                                                     \
        .multi_out_port_num = 0,                                                \
        .task_stack = ONBOARD_MIC_STREAM_TASK_STACK,                            \
        .task_core = ONBOARD_MIC_STREAM_TASK_CORE,                              \
        .task_prio = ONBOARD_SPEAKER_STREAM_TASK_PRIO,                          \
    },                                                                          \
    .aec_en = true,                                                             \
    .aec_cfg.aec_alg_cfg = {                                                    \
        .task_stack = AEC_V3_ALGORITHM_TASK_STACK,                              \
        .task_core = AEC_V3_ALGORITHM_TASK_CORE,                                \
        .task_prio = AEC_V3_ALGORITHM_TASK_PRIO,                                \
        .aec_cfg = {                                                            \
            .mode = AEC_MODE_SOFTWARE,                                          \
            .fs = AEC_V3_ALGORITHM_FS,                                          \
            .init_flags = AEC_V3_ALGORITHM_INIT_FLAG,                           \
            .delay_points = AEC_V3_DELAY_POINTS,                                \
            .ec_depth = AEC_V3_ALGORITHM_EC_DEPTH,                              \
            .ref_scale = AEC_V3_ALGORITHM_REF_SCALE,                            \
            .voice_vol = AEC_V3_ALGORITHM_VOL,                                  \
            .ns_type = NS_TRADITION,                                            \
            .ns_filter = AEC_V3_ALGORITHM_NS_FILTER,                            \
            .ns_level = AEC_V3_ALGORITHM_NS_LEVEL,                              \
            .ns_para = AEC_V3_ALGORITHM_NS_PARA,                                \
            .drc = AEC_V3_ALGORITHM_DRC,                                        \
            .ec_filter = AEC_V3_ALGORITHM_EC_FILTER,                            \
            .interweave = AEC_V3_ALGORITHM_INTERWEAVE,                          \
            .dist = AEC_V3_ALGORITHM_MIC_DIST,                                  \
            .mic_swap = AEC_V3_ALGORITHM_MIC_SWAP,                              \
            .ec_only_output = AEC_V3_ALGORITHM_EC_ONLY_OUTPUT,                  \
            .dual_perp = DUAL_CH_0_DEGREE,                                      \
        },                                                                      \
        .vad_cfg = {                                                            \
            .vad_enable = 0,                                                    \
            .vad_start_threshold = 480,                                         \
            .vad_stop_threshold = 960,                                          \
            .vad_silence_threshold = 320,                                       \
            .vad_eng_threshold =2000,                                           \
            .vad_bad_frame = AEC_V3_VAD_BAD_FRAME_NUM,                          \
            .vad_buf_size = 15360,                                              \
            .vad_frame_size = 640,                                              \
        },                                                                      \
        .out_block_size = 640,                                                  \
        .out_block_num = AEC_V3_ALGORITHM_OUT_BLOCK_NUM,                        \
        .multi_out_port_num = 0,                                                \
        .dual_ch = 0,                                                           \
    },                                                                          \
    .enc_en = true,                                                             \
    .enc_type = AUDIO_ENC_TYPE_G711A,                                           \
    .enc_cfg.g711_enc_cfg = {                                                   \
        .buf_sz = G711_ENCODER_BUFFER_SIZE,                                     \
        .out_block_size = 320,                                                  \
        .out_block_num = 1,                                                     \
        .task_stack = G711_ENCODER_TASK_STACK,                                  \
        .task_core = G711_ENCODER_TASK_CORE,                                    \
        .task_prio = G711_ENCODER_TASK_PRIO,                                    \
        .enc_mode = G711_ENC_MODE_A_LOW,                                        \
    },                                                                          \
    .read_pool_size = 320,                                                      \
    .write_pool_size = 640,                                                     \
    .dec_en = true,                                                             \
    .dec_type = AUDIO_DEC_TYPE_G711A,                                           \
    .dec_cfg.g711_dec_cfg = {                                                   \
        .buf_sz = G711_DECODER_BUFFER_SIZE,                                     \
        .out_block_size = 640,                                                  \
        .out_block_num = 1,                                                     \
        .task_stack = G711_DECODER_TASK_STACK,                                  \
        .task_core = G711_DECODER_TASK_CORE,                                    \
        .task_prio = G711_DECODER_TASK_PRIO,                                    \
        .dec_mode = G711_DEC_MODE_A_LOW,                                        \
    },                                                                          \
    .spk_type = SPK_TYPE_I2S,                                                   \
    .spk_cfg.i2s_cfg = {                                                        \
        .gpio_group = I2S_STREAM_GPIO_GROUP,                                    \
        .role = I2S_STREAM_ROLE,                                                \
        .work_mode = I2S_STREAM_WORK_MODE,                                      \
        .lrck_invert = I2S_LRCK_INVERT_DISABLE,                                 \
        .sck_invert = I2S_SCK_INVERT_DISABLE,                                   \
        .lsb_first_en = I2S_LSB_FIRST_DISABLE,                                  \
        .sync_length = 0,                                                       \
        .data_length = 16,                                                      \
        .pcm_dlength = 0,                                                       \
        .store_mode = I2S_LRCOM_STORE_16R16L,                                   \
        .samp_rate = I2S_STREAM_SAMP_RATE,                                      \
        .pcm_chl_num = 1,                                                       \
        .channel_id = I2S_STREAM_CHANNEL_ID,                                    \
        .type = AUDIO_STREAM_WRITER,                                            \
        .buff_size = I2S_STREAM_BUFF_SIZE,                                      \
        .out_block_size = I2S_STREAM_BLOCK_SIZE,                                \
        .out_block_num = I2S_STREAM_BLOCK_NUM,                                  \
        .task_stack = I2S_STREAM_TASK_STACK,                                    \
        .task_core = I2S_STREAM_TASK_CORE,                                      \
        .task_prio = I2S_STREAM_TASK_PRIO,                                      \
        .multi_in_port_num = 0,                                                 \
        .multi_out_port_num = 1,                                                \
    },                                                                          \
    .event_handle = NULL,                                                       \
    .args = NULL,                                                               \
}

#ifdef  __cplusplus
}
#endif//__cplusplus

/**
 * @}
 */